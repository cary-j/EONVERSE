-- Compiled with roblox-ts v2.1.0
local TS = _G[script]
local function createMiddlewareProcessor(middlewareFactories, networkInfo, finalize)
	local middleware = {}
	if not middlewareFactories or #middlewareFactories == 0 then
		middleware[1] = finalize
	else
		do
			local i = #middlewareFactories - 1
			local _shouldIncrement = false
			while true do
				if _shouldIncrement then
					i -= 1
				else
					_shouldIncrement = true
				end
				if not (i >= 0) then
					break
				end
				local factory = middlewareFactories[i + 1]
				local processNext = middleware[i + 1 + 1] or finalize
				middleware[i + 1] = factory(TS.async(function(player, ...)
					local args = { ... }
					return processNext(player, unpack(args))
				end), networkInfo)
			end
		end
	end
	return TS.async(function(player, ...)
		local args = { ... }
		return middleware[1](player, unpack(args))
	end)
end
return {
	createMiddlewareProcessor = createMiddlewareProcessor,
}
